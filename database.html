<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database View - SIV Resources Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="database.css">
</head>
<body>
    <!-- Mobile menu toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Side Navigation -->
    <nav class="side-nav" id="sideNav">
        <div class="nav-header">
            <h2>SIV Database</h2>
        </div>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="index.html" class="nav-link">
                    <span class="nav-icon">üìä</span>
                    SIV Issuances
                </a>
            </li>
            <li class="nav-item">
                <a href="visa-information.html" class="nav-link">
                    <span class="nav-icon">üìã</span>
                    Visa Information
                </a>
            </li>
            <li class="nav-item">
                <a href="travel-information.html" class="nav-link">
                    <span class="nav-icon">‚úàÔ∏è</span>
                    Travel Information
                </a>
            </li>
            <li class="nav-item">
                <a href="admin.html" class="nav-link">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    Admin Portal
                </a>
            </li>
            <li class="nav-item active">
                <a href="database.html" class="nav-link">
                    <span class="nav-icon">üóÑÔ∏è</span>
                    Database View
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="database-container">
            <!-- Database Header -->
            <header class="database-header">
                <div class="header-content">
                    <div class="header-title">
                        <h1>Database Management System</h1>
                        <p class="header-subtitle">Normalized database tables with embassy as unique identifier</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="refreshBtn">
                            <span class="btn-icon">üîÑ</span>
                            Refresh All
                        </button>
                        <button class="btn btn-secondary" id="exportBtn">
                            <span class="btn-icon">üì•</span>
                            Export Data
                        </button>
                        <button class="btn btn-primary" id="saveAllBtn">
                            <span class="btn-icon">üíæ</span>
                            Save All
                        </button>
                    </div>
                </div>
            </header>

            <!-- Database Tables Tabs -->
            <section class="database-tabs">
                <div class="tabs-header">
                    <button class="tab-btn active" data-table="visa">
                        <span class="tab-icon">üìã</span>
                        Visa Information
                    </button>
                    <button class="tab-btn" data-table="travel">
                        <span class="tab-icon">‚úàÔ∏è</span>
                        Travel Information
                    </button>
                    <button class="tab-btn" data-table="siv">
                        <span class="tab-icon">üìä</span>
                        SIV Issuances
                    </button>
                    <button class="tab-btn" data-table="history">
                        <span class="tab-icon">üìù</span>
                        Change History
                    </button>
                    <button class="tab-btn" data-table="users">
                        <span class="tab-icon">üë•</span>
                        User Management
                    </button>
                </div>
            </section>

            <!-- Table Controls -->
            <section class="table-controls">
                <div class="controls-row">
                    <div class="search-wrapper">
                        <input type="text" id="tableSearch" class="table-search-input" placeholder="Search current table...">
                        <span class="search-icon">üîç</span>
                    </div>
                    <div class="table-actions">
                        <button class="btn btn-secondary btn-sm" id="addRecordBtn">
                            <span class="btn-icon">‚ûï</span>
                            Add Record
                        </button>
                        <button class="btn btn-secondary btn-sm" id="filterBtn">
                            <span class="btn-icon">‚öôÔ∏è</span>
                            Filter
                        </button>
                        <select id="recordsPerPage" class="records-select">
                            <option value="25">25 records</option>
                            <option value="50" selected>50 records</option>
                            <option value="100">100 records</option>
                            <option value="all">All records</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Visa Information Table -->
            <div class="table-container active" id="visaTable">
                <div class="table-header">
                    <h3>Visa Information Table</h3>
                    <p class="table-description">Visa requirements and processing information by embassy</p>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-col">
                                    <input type="checkbox" id="visaSelectAll" class="select-checkbox">
                                </th>
                                <th class="embassy-col sortable" data-field="embassy">Embassy (Key)</th>
                                <th class="country-col sortable" data-field="country">Country</th>
                                <th class="visa-required-col sortable" data-field="visaRequired">Visa Required</th>
                                <th class="visa-type-col">Visa Type</th>
                                <th class="cost-col">Cost</th>
                                <th class="validity-col">Validity</th>
                                <th class="processing-time-col">Processing Time</th>
                                <th class="application-method-col">Application Method</th>
                                <th class="official-link-col">Official Link</th>
                                <th class="extension-col">Extension Possible</th>
                                <th class="source-col">Source</th>
                                <th class="last-updated-col sortable" data-field="lastUpdated">Last Updated</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="visaTableBody">
                            <!-- Visa data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Travel Information Table -->
            <div class="table-container" id="travelTable">
                <div class="table-header">
                    <h3>Travel Information Table</h3>
                    <p class="table-description">Flight costs, accommodation, and travel details by embassy</p>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-col">
                                    <input type="checkbox" id="travelSelectAll" class="select-checkbox">
                                </th>
                                <th class="embassy-col sortable" data-field="embassy">Embassy (Key)</th>
                                <th class="country-col sortable" data-field="country">Country</th>
                                <th class="direct-flights-col">Direct Flights</th>
                                <th class="airlines-col">Airlines</th>
                                <th class="flight-duration-col">Flight Duration</th>
                                <th class="flight-cost-col">Flight Cost</th>
                                <th class="airport-col">Main Airport</th>
                                <th class="accommodation-cost-col">Accommodation Cost</th>
                                <th class="daily-expenses-col">Daily Expenses</th>
                                <th class="medical-cost-col">Medical Cost</th>
                                <th class="safety-level-col sortable" data-field="safetyLevel">Safety Level</th>
                                <th class="distance-col">Distance from Afghanistan</th>
                                <th class="last-updated-col sortable" data-field="lastUpdated">Last Updated</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="travelTableBody">
                            <!-- Travel data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- SIV Issuances Table -->
            <div class="table-container" id="sivTable">
                <div class="table-header">
                    <h3>SIV Issuances Table</h3>
                    <p class="table-description">Monthly SIV processing data by embassy</p>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-col">
                                    <input type="checkbox" id="sivSelectAll" class="select-checkbox">
                                </th>
                                <th class="embassy-col sortable" data-field="embassy">Embassy (Key)</th>
                                <th class="country-col sortable" data-field="country">Country</th>
                                <th class="rank-col sortable" data-field="rank">Rank</th>
                                <th class="month-col">Oct 2024</th>
                                <th class="month-col">Nov 2024</th>
                                <th class="month-col">Dec 2024</th>
                                <th class="month-col">Jan 2025</th>
                                <th class="month-col">Feb 2025</th>
                                <th class="month-col">Mar 2025</th>
                                <th class="month-col">Apr 2025</th>
                                <th class="month-col">May 2025</th>
                                <th class="total-col sortable" data-field="total">Total</th>
                                <th class="average-col">Monthly Avg</th>
                                <th class="last-updated-col sortable" data-field="lastUpdated">Last Updated</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="sivTableBody">
                            <!-- SIV data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Change History Table -->
            <div class="table-container" id="historyTable">
                <div class="table-header">
                    <h3>Change History Table</h3>
                    <p class="table-description">Audit trail of all database modifications</p>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-col">
                                    <input type="checkbox" id="historySelectAll" class="select-checkbox">
                                </th>
                                <th class="id-col sortable" data-field="id">ID</th>
                                <th class="embassy-col sortable" data-field="embassy">Embassy</th>
                                <th class="table-col sortable" data-field="table">Table</th>
                                <th class="action-col sortable" data-field="action">Action</th>
                                <th class="field-col">Field Changed</th>
                                <th class="old-value-col">Old Value</th>
                                <th class="new-value-col">New Value</th>
                                <th class="user-col sortable" data-field="user">User</th>
                                <th class="timestamp-col sortable" data-field="timestamp">Timestamp</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- Change history will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- User Management Table -->
            <div class="table-container" id="usersTable">
                <div class="table-header">
                    <h3>User Management Table</h3>
                    <p class="table-description">User accounts and permission management</p>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-col">
                                    <input type="checkbox" id="usersSelectAll" class="select-checkbox">
                                </th>
                                <th class="id-col sortable" data-field="id">User ID</th>
                                <th class="username-col sortable" data-field="username">Username</th>
                                <th class="email-col sortable" data-field="email">Email</th>
                                <th class="role-col sortable" data-field="role">Role</th>
                                <th class="permissions-col">Permissions</th>
                                <th class="status-col sortable" data-field="status">Status</th>
                                <th class="last-login-col sortable" data-field="lastLogin">Last Login</th>
                                <th class="created-col sortable" data-field="created">Created</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- User data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination-container" id="paginationContainer">
                <div class="pagination-info" id="paginationInfo">
                    Showing 1-50 of 120 records
                </div>
                <div class="pagination-controls" id="paginationControls">
                    <button class="pagination-btn" id="firstPageBtn" disabled>First</button>
                    <button class="pagination-btn" id="prevPageBtn" disabled>Previous</button>
                    <span class="pagination-pages" id="paginationPages">
                        <!-- Page buttons will be populated here -->
                    </span>
                    <button class="pagination-btn" id="nextPageBtn">Next</button>
                    <button class="pagination-btn" id="lastPageBtn">Last</button>
                </div>
            </div>

            <!-- Bulk Actions Panel -->
            <div class="bulk-actions-panel" id="bulkActionsPanel" style="display: none;">
                <div class="bulk-actions-content">
                    <span class="bulk-actions-text" id="bulkActionsText">0 records selected</span>
                    <div class="bulk-actions-buttons">
                        <button class="btn btn-secondary btn-sm" id="bulkEditBtn">
                            <span class="btn-icon">‚úèÔ∏è</span>
                            Edit Selected
                        </button>
                        <button class="btn btn-danger btn-sm" id="bulkDeleteBtn">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Delete Selected
                        </button>
                        <button class="btn btn-secondary btn-sm" id="exportSelectedBtn">
                            <span class="btn-icon">üì•</span>
                            Export Selected
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Edit Record</h3>
                <button class="modal-close" id="closeModalBtn">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic form will be populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
                <button class="btn btn-primary" id="saveEditBtn">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Filter Panel -->
    <div class="filter-panel" id="filterPanel" style="display: none;">
        <div class="filter-header">
            <h4>Filter Records</h4>
            <button class="close-filter-btn" id="closeFilterBtn">&times;</button>
        </div>
        <div class="filter-content" id="filterContent">
            <!-- Dynamic filters will be populated here -->
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="notification-toast" id="notificationToast">
        <span class="notification-icon">‚úì</span>
        <span class="notification-message">Action completed successfully!</span>
    </div>

    <script src="database.js"></script>
</body>
</html>